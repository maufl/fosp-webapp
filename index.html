<!DOCTYPE html>
<html>
<head>
<link rel='stylesheet' href='css/bootstrap.css'></link>
<link rel='stylesheet' href='css/main.css'></link>
<script type='text/javascript' src='js/require.js' data-main='js/app'></script>
<script type='text/html' id='acl-button' data-template-src='templates/acl-button.html'></script>
<script type='text/html' id='acl-table' data-template-src='templates/acl-table.html'></script>
<script type='text/html' id='acl-popover-content' data-template-src='templates/acl-popover-content.html'></script>
<script type='text/html' id='subscriptions-button' data-template-src='templates/subscriptions-button.html'></script>
<script type='text/html' id='subscriptions-popover-content' data-template-src='templates/subscriptions-popover-content.html'></script>
<script type='text/html' id='fosp-object-list' data-template-src='templates/fosp-object-list.html'></script>
</head>
<body>
<div class='system-notifications' data-bind='with: notifications'>
  <!-- ko foreach: { data: all, beforeRemove: fadeOut } -->
    <div class='notification' data-bind='mouseenter: $parent.stopTimeout.bind($parent), mouseleave: $parent.startTimeout.bind($parent)'>
      <div class='notification-head' data-bind='css: "notification-" + type'>
        <span class='glyphicon' data-bind='if: icon, css: "glyphicon-" + icon'></span>
        <span data-bind="if: title, text: title"></span>
        <button type="button" data-bind="click: $parent.remove.bind($parent)" class="close pull-right" aria-hidden="true">&times;</button>
      </div>
      <div class='notification-body'>
        <div data-bind='text: text'></div>
      </div>
    </div>
  <!-- /ko -->
</div>
<div id='explorer-container' class='page'>
  <div class="inset-rounded flx-h">
    <div id='side-bar' data-bind='muxSelect: "li:not(.no-select)"'>
      <div class='title'>
        <h2><span class="glyphicon glyphicon-globe"></span>&nbsp;fosp</h2>
      </div>
      <ul class="nav-list">
        <li class="nav-label no-select">Places</li>
        <li class='selected flx-h' data-bind='click: loadHome.bind($data)'><span class='glyphicon glyphicon-home'></span><a href="#">Home</a></li>
      </ul>
      <ul class="nav-list" data-bind='with: buddyList'>
        <li class="nav-label no-select">Buddys</li>
        <!-- ko foreach: { data: all, as: 'buddy' } -->
          <li data-bind='click: $root.loadBuddy.bind($root)'><a href="#" data-bind='text: buddy'></a></li>
        <!-- /ko -->
        <li class='no-select'><input type='email' placeholder='Add buddy' class='form-control input-sm' data-bind='value: newBuddy, key: { event: "press", callback: addBuddy.bind($data), code: 13 }' /></li>
      </ul>
      <ul class='nav-list nav-list-vertical pull-down'>
        <li><a class='glyphicon glyphicon-log-out' data-bind='click: logout'></a></li>
      </ul>
    </div>
    <div id='explorer' data-bind='with: currentRoot' class='flx-strech flx-v'>
      <div id='explorer-head' class='flx-nostrech'>
        <div class='current-root pull-left'>
          <span>Now on:</span>
          <h3 data-bind='text: path'></h2>
          <!-- ko template: 'acl-button' --><!-- /ko -->
          <!-- ko template: 'subscriptions-button' --><!-- /ko -->
        </div>
        <div class='user-menu pull-right'>
          <small>Welcome</small>
          <div data-bind='text: $root.login.user'></div>
        </div>
      </div>
      <div id='explorer-body' class='flx-strech flx-h scroll-x' data-bind='template: { name: "fosp-object-list", data: $data }'>
      </div>
    </div>
  </div>
</div>
<div id='login-container' class='page moving' data-bind='with: login, css: { rolledup: login.authenticated }' >
  <div class='container' id='login-form-container'>
    <span class='glyphicon glyphicon-globe' id='login-logo'></span>
    <div class='alert alert-danger' style='display: none' data-bind='visible: registrationFailure, text: registrationFailure'></div>
    <div class='alert alert-danger' style='display: none' data-bind='visible: authenticationFailure, text: authenticationFailure'></div>
    <form class="form" role="form">
      <div class="form-group" data-bind="css: { 'has-warn' : $parent.connectFailed, 'has-error': authenticationFailure }">
        <label for="inputID" class="control-label">Full username</label>
        <input data-bind='value: user' type="email" class="form-control" id="inputID" placeholder="alice@wonderland.lit">
      </div>
      <div class="form-group" data-bind="css: { 'has-error' : authenticationFailure }">
        <label for="inputPassword" class="control-label">Password</label>
        <input data-bind='value: password' type="password" class="form-control" id="inputPassword" placeholder="Password">
      </div>
      <div class="form-group" data-bind='visible: signup, css: { "has-error": passwordsDiffer }'>
        <label for="inputPasswordConfirm" class="control-label">Password confirmation</label>
        <input data-bind='value: passwordConfirmation' type="password" class="form-control" id="inputPasswordConfirm" placeholder="Password">
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" data-bind='checked: signup'>Create new account
        </label>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" data-bind='checked: autoLogin'>Automatically login
        </label>
      </div>
      <div class="form-group">
        <button type="submit" class="btn btn-primary pull-right" data-bind='text: signup() ? "Sign up" : "Sign in", click: $parent.connect.bind($parent)'></button>
      </div>
    </form>
  </div>
</div>
</body>
</html>
